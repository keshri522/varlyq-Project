// this is the conrollers function that will save all the data in the database
const User = require("../Model/user");
const { stack } = require("../routes/userroutes");

const UserControllers = async (req, res) => {
  console.log(req.body);
  // destructure the data
  const {
    availability,
    checkskill,
    companyname,
    contact,
    currency,
    finalQuestion,
    frequency,
    intern,
    jobTitle,
    jobpipeline,
    location,
    maxsalary,
    minsalary,
    qualification,
    skill,
  } = req.body;
  try {
    // first neew to verfiy if all the data is properly comonig or not
    if (
      !availability ||
      !checkskill ||
      !companyname ||
      !contact ||
      !currency ||
      !finalQuestion ||
      !frequency ||
      !intern ||
      !jobTitle ||
      !jobpipeline ||
      !location ||
      !minsalary ||
      !maxsalary ||
      !qualification ||
      !stack
    ) {
      res.status(400).json({
        message: "Please enter all the Fields",
      });
    }
    // need to save the data in the db
    // Create a new User instance with the provided data
    const newUser = new User({
      availability,
      checkskill,
      companyname,
      contact,
      currency,
      finalQuestion,
      frequency,
      intern,
      jobTitle,
      jobpipeline,
      location,
      maxsalary,
      minsalary,
      qualification,
      skill,
    });

    // Save the user to the database
    const savedUser = await newUser.save();

    res.status(201).json({
      message: "User created successfully",
      user: savedUser,
    });
  } catch (error) {
    console.log("Some errors", error); // just for debugging
    res.status(500).json({
      message: "Internal Server Error",
    });
  }
};
module.exports = UserControllers;
